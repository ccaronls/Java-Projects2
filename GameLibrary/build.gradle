apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'org.junit.platform.gradle.plugin'
apply plugin: 'java-library'
apply plugin: 'maven-publish'

buildscript {

    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.1'
    }
}

repositories {
    jcenter()
    mavenCentral()
}
dependencies {
    testImplementation 'junit:junit:4.12'
    implementation 'junit:junit:4.12'
}

sourceSets {
    main {
        java {
            srcDirs = [ 'src' ]
            exclude '**/skunkworks/**'
        }

    }

    android {
        java {
            srcDirs = [ 'src' ]
            excludes = ['**/skunkworks/**', '**/swing/**']
        }
    }

    test {
        java {
            srcDirs = ['test']
        }

        resources {
            srcDirs = ['testResources']
        }
    }

}

application {
    mainClassName = 'cc.game.swing.AWTBoardBuilder'
}

task runCheckers(type: JavaExec) {
    group = 'Application' // <-- change the name as per your need
    description = 'Run the Checkers Applet'

    classpath sourceSets.main.runtimeClasspath // <-- Don't change this
    main = "cc.lib.swing.AWTCheckers"
//    args "arg1", "arg2"
}

task runBoardBuilder(type: JavaExec) {
    group = 'Application' // <-- change the name as per your need
    description = 'Run the Dungeon Builder Applet Applet'

    classpath sourceSets.main.runtimeClasspath // <-- Don't change this
    main = "cc.lib.swing.AWTBoardBuilder"
//    args "arg1", "arg2"
}

task runMonopoly(type: JavaExec) {
    group = 'Application' // <-- change the name as per your need
    description = 'Small description what this run will do'

    classpath sourceSets.main.runtimeClasspath // <-- Don't change this
    main = "cc.lib.swing.AWTMonopoly"
//    args "arg1", "arg2"
}

task runProbotLevelBuilder(type: JavaExec) {
    group = 'Application' // <-- change the name as per your need
    description = 'Small description what this run will do'

    classpath sourceSets.main.runtimeClasspath // <-- Don't change this
    main = "cc.lib.swing.AWTProbotLevelBuilder"
//    args "arg1", "arg2"
}

dependencies {
    // https://mvnrepository.com/artifact/org.json/json
    implementation group: 'org.json', name: 'json', version: '20090211'
    testImplementation 'junit:junit:4.12'
}

task compiledJar(type: Jar) {
    from sourceSets.find {'android'}.output
    //archiveClassifier = 'sources'
}

publishing {
    publications {
        myLibrary(MavenPublication) {
            groupId = 'cc.lib'
            artifactId = 'gamelib-android'
            version = '1.0'

            artifact compiledJar
        }
    }

    repositories {
        maven {
            name = 'myRepo'
            url = "file://${buildDir}/repo"
        }

    }
}
