apply plugin: 'java-library'
apply plugin: 'application'

mainClassName = 'cc.game.yahtzee.console.YahtzeeConsole'

configurations {
    androidLib.extendsFrom(main)
}

dependencies {
    implementation project(':GameLibrary')
    androidLib project(path: ':GameLibrary', configuration: 'androidLib')
}

sourceSets {
    main {
        java {
            srcDirs = ['src']
        }
    }

    androidLib {
        java {
            srcDirs = [ 'src' ]
            excludes = ['**/console/**']
        }
    }
}

task runConsole(type: JavaExec) {
    group = 'Application' // <-- change the name as per your need
    description = 'Run the Console App'
    standardInput = System.in
    classpath sourceSets.main.runtimeClasspath // <-- Don't change this
    main = "cc.game.yahtzee.console.YahtzeeConsole"
//    args "arg1", "arg2"
}

task androidLibJar(type: Jar) {
    from sourceSets.androidLib.output.classesDirs
    archiveName("YahtzeeAndroid.jar")
}

artifacts {
    androidLib androidLibJar
}

compileAndroidLibJava.dependsOn project(':GameLibrary').getTasksByName('androidLibJar', false)
compileAndroidLibJava.classpath += project(':GameLibrary').sourceSets.androidLib.output.classesDirs
